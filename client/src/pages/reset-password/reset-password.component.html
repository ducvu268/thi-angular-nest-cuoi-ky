<p-toast></p-toast>
<div class="reset-password-container">
    <div class="reset-password-card">
        <div class="reset-password-header">
            <div class="logo-container">
                <img src="images/ic_logo_starbucks.png" alt="Logo" class="logo-image">
            </div>
            <h1>Đặt lại mật khẩu</h1>
            <p *ngIf="!resetSuccess">Vui lòng nhập mật khẩu mới của bạn.</p>
            <p *ngIf="resetSuccess" class="success-message">Mật khẩu của bạn đã được đặt lại thành công.</p>
        </div>

        <div *ngIf="!resetSuccess">
            <form [formGroup]="formResetPassword" (ngSubmit)="submitResetPassword()">
                <div class="p-fluid">
                    <!-- Password field -->
                    <div class="field">
                        <p-iftalabel>
                            <p-iconfield>
                                <p-inputicon class="pi pi-lock" />
                                <p-password id="password" autocomplete="off" type="password" formControlName="password"
                                    placeholder="Nhập mật khẩu mới" [toggleMask]="true" styleClass="w-full"
                                    [style]="{'width': '100%'}">
                                </p-password>
                            </p-iconfield>
                            <label for="password">Mật khẩu mới</label>
                        </p-iftalabel>
                        <!-- error -->
                        <small
                            *ngIf="formResetPassword.get('password').errors && formResetPassword.get('password').errors['required'] && isSubmitted"
                            class="error-message">
                            Vui lòng nhập mật khẩu mới
                        </small>
                        <small
                            *ngIf="formResetPassword.get('password').errors && formResetPassword.get('password').errors['minlength'] && isSubmitted"
                            class="error-message">
                            Mật khẩu phải có ít nhất 8 ký tự
                        </small>
                    </div>

                    <!-- Confirm Password field -->
                    <div class="field">
                        <p-iftalabel>
                            <p-iconfield>
                                <p-inputicon class="pi pi-lock" />
                                <p-password id="confirmPassword" autocomplete="off" type="password"
                                    formControlName="confirmPassword" placeholder="Xác nhận mật khẩu mới"
                                    [toggleMask]="true" styleClass="w-full" [style]="{'width': '100%'}">
                                </p-password>
                            </p-iconfield>
                            <label for="confirmPassword">Xác nhận mật khẩu</label>
                        </p-iftalabel>
                        <!-- error -->
                        <small
                            *ngIf="formResetPassword.get('confirmPassword').errors && formResetPassword.get('confirmPassword').errors['required'] && isSubmitted"
                            class="error-message">
                            Vui lòng xác nhận mật khẩu
                        </small>
                        <small
                            *ngIf="formResetPassword.errors && formResetPassword.errors['passwordsMismatch'] && isSubmitted"
                            class="error-message">
                            Mật khẩu xác nhận không khớp
                        </small>
                    </div>

                    <div class="button-container">
                        <p-button type="submit" label="Đặt lại mật khẩu"
                            styleClass="p-button-raised p-button-rounded submit-button" [loading]="loading"></p-button>
                    </div>
                </div>
            </form>
        </div>

        <div *ngIf="resetSuccess" class="success-container">
            <p>Bạn sẽ được chuyển hướng đến trang đăng nhập sau 5 giây...</p>
        </div>

        <div class="login-link" *ngIf="!resetSuccess">
            <span>Đã nhớ mật khẩu? </span>
            <a href="/dashboard">Quay lại trang chủ</a>
        </div>
    </div>
</div>